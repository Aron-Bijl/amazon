{"ast":null,"code":"var _jsxFileName = \"/Users/aron/Desktop/code/webpage/amazon/frontend/src/screens/ProductScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { detailsProduct, productCreateReview } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Rating from '../components/Rating';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProductScreen() {\n  _s();\n\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetails;\n  const productId = document.location.pathname.split(\"/\")[document.location.pathname.split(\"/\").length - 1];\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const productReviewCreate = useSelector(state => state.productReviewCreate);\n  const {\n    loading: loadingReviewCreate,\n    error: errorReviewCreate,\n    success: successReviewCreate\n  } = productReviewCreate;\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  useEffect(() => {\n    if (successReviewCreate) {\n      window.alert('Review submitted successfully');\n    }\n\n    dispatch(detailsProduct(productId));\n  }, [dispatch, productId]);\n\n  const addToCartHandler = () => {\n    navigate(`/cart/${productId}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (comment && rating) {\n      dispatch(productCreateReview(productId, {\n        rating,\n        comment,\n        name: userInfo.name\n      }));\n    } else {\n      alert('Please enter comment and rating');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 22\n    }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Back to Result\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row top\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-2\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"large\",\n            src: product.image,\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-1\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Rating, {\n                rating: product.rating,\n                numReviews: product.numReviews\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"Price : $\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"Description:\", /*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Seller \", /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/seller/${product.seller._id}`,\n                    children: product.seller.seller.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(Rating, {\n                  rating: product.seller.seller.rating,\n                  numReviews: product.seller.seller.numReviews\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"price\",\n                    children: [\"$\", product.price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: product.countInStock > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"success\",\n                      children: \"In Stock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 69\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"danger\",\n                      children: \"Out of Stock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 38\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 29\n              }, this), product.countInStock > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: qty,\n                    onChange: e => setQty(e.target.value),\n                    children: [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: x + 1,\n                      children: x + 1\n                    }, x + 1, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 53\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: addToCartHandler,\n                    className: \"primary block\",\n                    children: \"Add to Cart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          id: \"reviews\",\n          children: \"Reviews\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), product.reviews.length === 0 && /*#__PURE__*/_jsxDEV(MessageBox, {\n          children: \"There is no review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [product.reviews.map(review => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: review.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Rating, {\n              rating: review.rating,\n              caption: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\" \", review.createdAt.substring(0, 10), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: review.comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)]\n          }, review._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: userInfo ? /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"form\",\n              onSubmit: submitHandler,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: \"Write a customer review\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"rating\",\n                children: \"Rating\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"rating\",\n                value: rating,\n                onChange: e => setRating(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"1-Poor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2\",\n                  children: \"2-Fair\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"3\",\n                  children: \"3-Good\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"4\",\n                  children: \"4-Very good\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"5\",\n                  children: \"5-Excelent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"comment\",\n                  children: \"Comment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"comment\",\n                  value: comment,\n                  onChange: e => setComment(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"primary\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n              children: [\"Please \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/signin\",\n                children: \"Sign in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 48\n              }, this), \" to write review\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductScreen, \"IGn0aATMTogvvHT17K0SvwqbQIc=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = ProductScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductScreen\");","map":{"version":3,"sources":["/Users/aron/Desktop/code/webpage/amazon/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","useNavigate","detailsProduct","productCreateReview","LoadingBox","MessageBox","Rating","ProductScreen","navigate","dispatch","qty","setQty","productDetails","state","loading","error","product","productId","document","location","pathname","split","length","userSignin","userInfo","productReviewCreate","loadingReviewCreate","errorReviewCreate","success","successReviewCreate","rating","setRating","comment","setComment","window","alert","addToCartHandler","submitHandler","e","preventDefault","name","image","numReviews","price","description","seller","_id","countInStock","target","value","Array","keys","map","x","reviews","review","createdAt","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { detailsProduct, productCreateReview } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Rating from '../components/Rating';\n\nexport default function ProductScreen(){\n    let navigate = useNavigate();\n    const dispatch = useDispatch();\n    const [qty, setQty] = useState(1);\n    const productDetails = useSelector(state => state.productDetails);\n    const { loading, error, product } = productDetails;\n\n    const productId = document.location.pathname.split(\"/\")[document.location.pathname.split(\"/\").length - 1];\n\n    const userSignin = useSelector(state => state.userSignin);\n    const { userInfo } = userSignin;\n\n    const productReviewCreate = useSelector(state => state.productReviewCreate);\n    const { loading: loadingReviewCreate, error: errorReviewCreate, success: successReviewCreate } = productReviewCreate;\n\n    const [rating, setRating] = useState(0);\n    const [comment, setComment] = useState('');\n\n    useEffect(() => {\n        if(successReviewCreate){\n            window.alert('Review submitted successfully');\n        }\n        dispatch(detailsProduct(productId))\n    }, [dispatch, productId]);\n\n    const addToCartHandler = () => {\n        navigate(`/cart/${productId}?qty=${qty}`);\n    }\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n        if(comment && rating){\n            dispatch(productCreateReview(productId, {rating, comment, name: userInfo.name}));\n        }else{\n            alert('Please enter comment and rating');\n        }\n    }\n\n    return (\n        <div>\n        { loading ? (<LoadingBox></LoadingBox>) \n        : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n        ) : (\n            <div>\n            <Link to=\"/\">Back to Result</Link>\n            <div className=\"row top\">\n                <div className=\"col-2\">\n                    <img className=\"large\" src={product.image} alt={product.name}></img>\n                </div>\n                <div className=\"col-1\">\n                    <ul>\n                        <li>\n                            <h1>{product.name}</h1>\n                        </li>\n                        <li>\n                            <Rating rating={product.rating} numReviews={product.numReviews}></Rating>\n                        </li>\n                        <li>\n                            Price : ${product.price}\n                        </li>\n                        <li>\n                            Description:\n                            <p>{product.description}</p>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"col-1\">\n                    <div className=\"card card-body\">\n                        <ul>\n                            <li>\n                                Seller <h2>\n                                    <Link to={`/seller/${product.seller._id}`}>\n                                        {product.seller.seller.name}\n                                    </Link>\n                                </h2>\n                                <Rating rating={product.seller.seller.rating} numReviews={product.seller.seller.numReviews}></Rating>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Price</div>\n                                    <div className=\"price\">${product.price}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Status</div>\n                                    <div>{product.countInStock>0 ? (<span className=\"success\">In Stock</span>):\n                                    (<span className=\"danger\">Out of Stock</span>)\n                                    }</div>\n                                </div>\n                            </li>\n                            {\n                                product.countInStock > 0 && (\n                                <>\n                                    <li>\n                                        <div className=\"row\"></div>\n                                        <div>Quantity</div>\n                                        <select value={qty} onChange={(e) => setQty(e.target.value)}>\n                                            {[...Array(product.countInStock).keys()].map( x => (\n                                                    <option key={x+1} value={x+1}>{x+1}</option>\n                                                )\n                                            )}\n                                        </select>\n                                    </li>\n                                    <li>\n                                        <button onClick={addToCartHandler} className=\"primary block\">Add to Cart</button>\n                                    </li>\n                                </>\n                                )\n                            }\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <h2 id=\"reviews\">\n                    Reviews\n                </h2>\n                {product.reviews.length === 0 && (<MessageBox>There is no review</MessageBox>)}\n                <ul>\n                    {product.reviews.map((review) => (\n                        <li key={review._id}>\n                            <strong>{review.name}</strong>\n                            <Rating rating={review.rating} caption=' '></Rating>\n                            <p> {review.createdAt.substring(0, 10)} </p>\n                            <p>{review.comment}</p>\n                        </li>\n                    ))}\n                    <li>\n                        {userInfo ? (\n                            <form className='form' onSubmit={submitHandler}>\n                                <div>\n                                    <h2>Write a customer review</h2>\n                                </div>\n                                \n                                <label htmlFor=\"rating\">Rating</label>\n                                <select id=\"rating\" value={rating} onChange={(e) => setRating(e.target.value)}>\n                                    <option value=''>Select...</option>\n                                    <option value='1'>1-Poor</option>\n                                    <option value='2'>2-Fair</option>\n                                    <option value='3'>3-Good</option>\n                                    <option value='4'>4-Very good</option>\n                                    <option value='5'>5-Excelent</option>\n                                </select>\n                                <div>\n                                    <label htmlFor='comment'>Comment</label>\n                                    <textarea id='comment' value={comment} onChange={(e) => setComment(e.target.value)}></textarea>\n                                </div>\n                                <div>\n                                    <label></label>\n                                    <button type='submit' className='primary'>Submit</button>\n                                </div>\n                            </form>\n                        ): (\n                            <MessageBox>Please <Link to='/signin'>Sign in</Link> to write review</MessageBox>\n                        )}\n                    </li>\n                </ul>\n            </div>\n        </div>\n        )} \n     </div>\n       \n    )\n}"]},"metadata":{},"sourceType":"module"}