{"ast":null,"code":"import _toConsumableArray from\"/Users/aron/Desktop/code/webpage/amazon/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useNavigate}from'react-router-dom';import{ADD_TO_CART,removeFromCart}from\"../actions/cartActions\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var productId=document.location.pathname.split(\"/\")[document.location.pathname.split(\"/\").length-1];var qty=window.location.search?Number(window.location.search.split('=')[1]):1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(ADD_TO_CART(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){//delete action\ndispatch(removeFromCart(id));};var navigate=useNavigate();var checkOutHandler=function checkOutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-2\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(ADD_TO_CART(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Remove\"})})]})},item.product);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:checkOutHandler,className:\"primary block\",disabled:cartItems.length===0,children:\"Proceed to Check-out\"})})]})})})]});}","map":{"version":3,"sources":["/Users/aron/Desktop/code/webpage/amazon/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useNavigate","ADD_TO_CART","removeFromCart","MessageBox","CartScreen","productId","document","location","pathname","split","length","qty","window","search","Number","cart","state","cartItems","dispatch","removeFromCartHandler","id","navigate","checkOutHandler","map","item","image","name","product","e","target","value","Array","countInStock","keys","x","reduce","a","c","price"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport { ADD_TO_CART, removeFromCart } from \"../actions/cartActions\";\nimport MessageBox from \"../components/MessageBox\";\n\nexport default function CartScreen (){\n    const productId = document.location.pathname.split(\"/\")[document.location.pathname.split(\"/\").length - 1];\n    const qty = window.location.search\n    ? Number(window.location.search.split('=')[1])\n    : 1;\n\n    const cart = useSelector(state => state.cart);\n    const { cartItems } = cart;\n    const dispatch = useDispatch();\n    useEffect(() => {\n        if(productId){\n            dispatch(ADD_TO_CART(productId, qty));\n        }\n    }, [dispatch, productId, qty]);\n    const removeFromCartHandler = (id) => {\n        //delete action\n        dispatch(removeFromCart(id));\n    }\n\n    let navigate = useNavigate();\n    const checkOutHandler = () => {\n        navigate('/signin?redirect=/shipping');\n    }\n\n    return (\n        <div className=\"row top\">\n            <div className=\"col-2\">\n                <h1>Shopping Cart</h1>\n                { cartItems.length === 0 ? <MessageBox>\n                    Cart is empty. <Link to=\"/\">Go Shopping</Link>\n                    </MessageBox> \n                    :\n                    (\n                        <ul>\n                            {\n                                cartItems.map((item) => (\n                                    <li key={ item.product } > \n                                        <div className=\"row\"> \n                                            <div>  \n                                                <img \n                                                    src={item.image} \n                                                    alt={item.name} \n                                                    className=\"small\">\n                                                </img>\n                                            </div> \n                                            <div  className=\"min-30\">\n                                                <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                            </div>\n                                            <div>\n                                                <select value={item.qty} onChange={ e =>  \n                                                    dispatch(\n                                                        ADD_TO_CART(item.product, Number(e.target.value))\n                                                    )\n                                                    }\n                                                    >\n                                                        {[...Array(item.countInStock).keys()].map( x => (\n                                                                <option key={x+1} value={x+1}>{x+1}</option>\n                                                            )\n                                                        )}\n                                                </select>\n                                            </div>\n                                            <div>\n                                                <button \n                                                    type=\"button\" \n                                                    onClick={() => removeFromCartHandler(item.product)\n                                                }>\n                                                    Remove\n                                                </button>\n                                            </div>\n                                        </div> \n                                    </li>\n                                ))\n                            }\n                        </ul>\n                    )\n                }\n            </div>\n            <div className=\"col-1\">\n                <div className=\"card card-body\">\n                    <ul>\n                        <li>\n                            <h2>\n                                Subtotal ({ cartItems.reduce((a, c) => a + c.qty, 0) } items) : ${cartItems.reduce((a,c) => a + c.price * c.qty, 0)}\n                            </h2>\n                        </li>\n                        <li>\n                            <button type=\"button\" onClick={checkOutHandler} className=\"primary block\" disabled={cartItems.length === 0}>\n                                Proceed to Check-out\n                            </button>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}