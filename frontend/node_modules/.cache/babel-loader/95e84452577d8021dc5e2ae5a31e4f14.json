{"ast":null,"code":"import _objectSpread from\"/Users/aron/Desktop/code/webpage/amazon/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlaceOrderScreen(){var cart=useSelector(function(state){return state.cart;});var navigate=useNavigate();if(!cart.paymentMethod){navigate('/payment');}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};// e.g. 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(25):toPrice(0);cart.taxPrice=toPrice(.27*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){navigate(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,navigate,order,success]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address\"}),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",cart.paymentMethod]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),/*#__PURE__*/_jsx(\"ul\",{children:cart.cartItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"small\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-30\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[item.qty,\" x $\",item.price,\" = $\",item.qty*item.price]})]})},item.product);})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items Total\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.itemsPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.shippingPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.taxPrice.toFixed(2)]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Order Total \"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"  $\",cart.totalPrice.toFixed(2),\" \"]})})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:placeOrderHandler,className:\"primary block\",disabled:cart.cartItems.length===0,children:\"Place Order\"})}),loading&&/*#__PURE__*/_jsx(LoadingBox,{}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error})]})})})]})]});}","map":{"version":3,"sources":["/Users/aron/Desktop/code/webpage/amazon/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","useNavigate","Link","createOrder","CheckoutSteps","ORDER_CREATE_RESET","LoadingBox","MessageBox","PlaceOrderScreen","cart","state","navigate","paymentMethod","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalCode","country","map","item","image","name","product","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { createOrder } from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\nexport default function PlaceOrderScreen(){\n    const cart = useSelector(state => state.cart);\n    const navigate = useNavigate();\n    if(!cart.paymentMethod){\n        navigate('/payment');\n    }\n    const orderCreate = useSelector(state => state.orderCreate);\n    const { loading, success, error, order } = orderCreate;\n\n    const toPrice = (num) => Number(num.toFixed(2)); // e.g. 5.123 => \"5.12\" => 5.12\n    cart.itemsPrice = toPrice(cart.cartItems.reduce((a, c) => a + c.qty*c.price,  0));\n    cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(25): toPrice(0);\n    cart.taxPrice = toPrice(.27 * cart.itemsPrice);\n    cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n    const dispatch = useDispatch();\n\n    const placeOrderHandler = () => {\n        dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n    }\n\n    useEffect(()=> {\n        if(success){\n            navigate(`/order/${order._id}`);\n            dispatch({type: ORDER_CREATE_RESET});\n        }\n    }, [dispatch, navigate, order, success]);\n    return(\n        <div>\n            <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\n            <div className=\"row top\">\n                <div className=\"col-2\">\n                    <ul>\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Shipping</h2>\n                                <p>\n                                    <strong>Name:</strong> {cart.shippingAddress.fullName} <br></br>\n                                    <strong>Address</strong> {cart.shippingAddress.address}, \n                                        {cart.shippingAddress.city}, {cart.shippingAddress.postalCode},\n                                        {cart.shippingAddress.country}\n                                </p>\n                            </div>\n                        </li>\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Payment</h2>\n                                <p>\n                                    <strong>Method:</strong> {cart.paymentMethod}\n                                </p>\n                            </div>\n                        </li>\n                        <li>\n                            <div className=\"card card-body\">\n                                <h2>Order Items</h2>\n                                <ul>\n                                    {\n                                        cart.cartItems.map((item) => (\n                                            <li key={ item.product } > \n                                                <div className=\"row\"> \n                                                    <div>  \n                                                        <img \n                                                            src={item.image} \n                                                            alt={item.name} \n                                                            className=\"small\">\n                                                        </img>\n                                                    </div> \n                                                    <div  className=\"min-30\">\n                                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                                    </div>\n                                                    <div>\n                                                        {item.qty} x ${item.price} = ${item.qty*item.price}\n                                                    </div>\n                                                </div> \n                                            </li>\n                                        ))\n                                    }\n                                </ul>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"col-1\">\n                    <div className=\"card card-body\">\n                        <ul>\n                            <li>\n                                <h2>Order Summary</h2>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                        Items Total\n                                    </div>\n                                    <div>\n                                        ${cart.itemsPrice.toFixed(2)}\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                        Shipping\n                                    </div>\n                                    <div>\n                                        ${cart.shippingPrice.toFixed(2)}\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                        Tax\n                                    </div>\n                                    <div>\n                                        ${cart.taxPrice.toFixed(2)}\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>\n                                       <strong> Order Total </strong>\n                                    </div>\n                                    <div>\n                                      <strong>  ${cart.totalPrice.toFixed(2)} </strong>\n                                    </div>\n                                </div>\n                            </li>\n                            <li>\n                                <button \n                                    type=\"button\" \n                                    onClick={placeOrderHandler} \n                                    className=\"primary block\"\n                                    disabled={cart.cartItems.length === 0}\n                                >\n                                        Place Order\n                                </button>\n                            </li>\n                            { loading && <LoadingBox></LoadingBox> }\n                            { error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}