{"ast":null,"code":"import _asyncToGenerator from\"/Users/aron/Desktop/code/webpage/amazon/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/aron/Desktop/code/webpage/amazon/frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{USER_DETAILS_FAIL,USER_DETAILS_REQUEST,USER_DETAILS_SUCCESS,USER_REGISTER_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_SIGNIN_FAIL,USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNOUT,USER_UPDATE_PROFILE_FAIL,USER_UPDATE_PROFILE_REQUEST,USER_UPDATE_PROFILE_SUCCESS}from\"../constants/userConstant\";export var signin=function signin(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{email:email,password:password}});_context.prev=1;_context.next=4;return axios.post('/api/users/signin',{email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{email:email,password:password}});_context2.prev=1;_context2.next=4;return axios.post('/api/users/register',{name:name,email:email,password:password});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;dispatch({type:USER_REGISTER_SUCCESS,payload:data});dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var signout=function signout(){return function(dispatch){localStorage.removeItem('userInfo');localStorage.removeItem('cartItems');localStorage.removeItem('shippingAddress');dispatch({type:USER_SIGNOUT});};};export var detailsUser=function detailsUser(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState,userInfo,_yield$axios$get,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_DETAILS_REQUEST,payload:userId});_getState=getState(),userInfo=_getState.userSignin.userInfo;_context3.prev=2;_context3.next=5;return axios.get(\"/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;dispatch({type:USER_DETAILS_SUCCESS,payload:data});_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);message=_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message;dispatch({type:USER_DETAILS_FAIL,payload:message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var updateUserProfile=function updateUserProfile(user){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState2,userInfo,_yield$axios$put,data,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:USER_UPDATE_PROFILE_REQUEST,payload:user});_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context4.prev=2;_context4.next=5;return axios.put(\"/api/users/profile\",user,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$put=_context4.sent;data=_yield$axios$put.data;dispatch({type:USER_UPDATE_PROFILE_SUCCESS,payload:data});dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context4.next=16;break;case 12:_context4.prev=12;_context4.t0=_context4[\"catch\"](2);message=_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message;dispatch({type:USER_UPDATE_PROFILE_FAIL,payload:message});case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[2,12]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/aron/Desktop/code/webpage/amazon/frontend/src/actions/userActions.js"],"names":["axios","USER_DETAILS_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNOUT","USER_UPDATE_PROFILE_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","signin","email","password","dispatch","type","payload","post","data","localStorage","setItem","JSON","stringify","response","message","register","name","signout","removeItem","detailsUser","userId","getState","userInfo","userSignin","get","headers","Authorization","token","updateUserProfile","user","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNOUT, USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS } from \"../constants/userConstant\"\n\nexport const signin = (email, password) => async (dispatch) => {\n    dispatch({type: USER_SIGNIN_REQUEST, payload: {email, password}});\n    try{\n        const {data} = await axios.post('/api/users/signin', {email, password}) \n        dispatch({type:  USER_SIGNIN_SUCCESS, payload: data});\n        localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch(error){\n        dispatch({type: USER_SIGNIN_FAIL, payload: error.response && error.response.data.message \n            ? error.response.data.message\n            : error.message,});\n    }\n};\n\nexport const register = (name, email, password) => async (dispatch) => {\n    dispatch({type: USER_REGISTER_REQUEST, payload: {email, password}});\n    try{\n        const {data} = await axios.post('/api/users/register', {name, email, password}) \n        dispatch({type:  USER_REGISTER_SUCCESS, payload: data});\n        dispatch({type:  USER_SIGNIN_SUCCESS, payload: data});\n        localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch(error){\n        dispatch({type: USER_REGISTER_FAIL, payload: error.response && error.response.data.message \n            ? error.response.data.message\n            : error.message,});\n    }\n};\n\n\nexport const signout = () => (dispatch) => {\n    localStorage.removeItem('userInfo');\n    localStorage.removeItem('cartItems');\n    localStorage.removeItem('shippingAddress');\n    dispatch({type: USER_SIGNOUT});\n};\n\nexport const detailsUser = (userId) => async (dispatch, getState) => {\n    dispatch({type: USER_DETAILS_REQUEST, payload: userId});\n    const  {userSignin: {userInfo}} = getState();\n    try {\n        const { data } = await axios.get(`/api/users/${userId}`, {\n            headers: { Authorization: `Bearer ${userInfo.token}` },\n        })\n        dispatch({ type: USER_DETAILS_SUCCESS, payload: data });\n    } catch (error) {\n        const message = error.response && error.response.data.message \n        ? error.response.data.message\n        : error.message;\n        dispatch({type: USER_DETAILS_FAIL, payload: message})\n    }\n}\n\nexport const updateUserProfile = (user) => async (dispatch, getState) =>{\n    dispatch({type: USER_UPDATE_PROFILE_REQUEST, payload: user});\n    const { userSignin: {userInfo} } = getState();\n    try {\n        const { data } = await axios.put(`/api/users/profile`, user, {\n            headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n        dispatch({type: USER_UPDATE_PROFILE_SUCCESS, payload: data});\n        dispatch({type: USER_SIGNIN_SUCCESS, payload: data});\n        localStorage.setItem('userInfo', JSON.stringify(data));\n    } catch (error) {\n        const message = error.response && error.response.data.message \n        ? error.response.data.message\n        : error.message;\n        dispatch({type: USER_UPDATE_PROFILE_FAIL, payload: message});\n    }\n}"]},"metadata":{},"sourceType":"module"}